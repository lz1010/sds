window.addEventListener("DOMContentLoaded", (function () { [].forEach.call(document.querySelectorAll(".tel"), (function (e) { var t; function n(e) { e.keyCode && (t = e.keyCode), this.selectionStart < 3 && e.preventDefault(); var n = "+7 (___) ___ ____", l = 0, a = (n.replace(/\D/g, ""), this.value.replace(/\D/g, "")), r = n.replace(/[_\d]/g, (function (e) { return l < a.length ? a.charAt(l++) : e })); -1 != (l = r.indexOf("_")) && (l < 5 && (l = 3), r = r.slice(0, l)); var i = n.substr(0, this.value.length).replace(/_+/g, (function (e) { return "\\d{1," + e.length + "}" })).replace(/[+()]/g, "\\$&"); (!(i = new RegExp("^" + i + "$")).test(this.value) || this.value.length < 5 || t > 47 && t < 58) && (this.value = r), "blur" == e.type && this.value.length < 5 && (this.value = "") } e.addEventListener("input", n, !1), e.addEventListener("focus", n, !1), e.addEventListener("blur", n, !1), e.addEventListener("keydown", n, !1) })) }))